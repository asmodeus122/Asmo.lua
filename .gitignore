-- SCRIPT BASEADO EM STEAL A BRAINROT

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local uis = game:GetService("UserInputService")
local ContextActionService = game:GetService("ContextActionService")
local localPlayer = Players.LocalPlayer
local ESP_ENABLED = false
local Noclip_ENABLED = false
local Teleport_ENABLED = false
local Steal_ENABLED = false
local InfiniteJump_ENABLED = true
local Godmode_ENABLED = false
local SpeedBoost_ENABLED = false

-- GUI
local gui = Instance.new("ScreenGui", localPlayer:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 160, 0, 410)
frame.Position = UDim2.new(0, 10, 0.5, -205)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Parent = gui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "🧠 ASMO HUB"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame

local function createButton(text, yPos, callback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 40)
    button.Position = UDim2.new(0, 10, 0, yPos)
    button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.Gotham
    button.TextSize = 14
    button.Text = text
    button.Parent = frame
    button.MouseButton1Click:Connect(callback)
    return button
end

-- ESP
function updateESP()
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Model") and v:FindFirstChild("HumanoidRootPart") and v.Name:lower():find("brainrot") then
            if not v:FindFirstChild("ESP") then
                local billboard = Instance.new("BillboardGui", v)
                billboard.Name = "ESP"
                billboard.Adornee = v.HumanoidRootPart
                billboard.Size = UDim2.new(0, 100, 0, 40)
                billboard.AlwaysOnTop = true

                local label = Instance.new("TextLabel", billboard)
                label.Size = UDim2.new(1, 0, 1, 0)
                label.BackgroundTransparency = 1
                label.TextColor3 = Color3.fromRGB(255, 0, 0)
                label.Font = Enum.Font.GothamBold
                label.TextScaled = true
                label.Text = v.Name
            end
        end
    end
end

createButton("🔍 ESP", 40, function()
    ESP_ENABLED = not ESP_ENABLED
    if ESP_ENABLED then
        while ESP_ENABLED do
            updateESP()
            task.wait(2)
        end
    else
        for _, gui in pairs(workspace:GetDescendants()) do
            if gui:IsA("BillboardGui") and gui.Name == "ESP" then
                gui:Destroy()
            end
        end
    end
end)

-- Região base para contagem de tempo (ajuste o nome conforme o seu jogo)
local baseRegionPart = workspace:FindFirstChild("Base")

-- Tabela para armazenar o tempo de cada jogador dentro da base
local baseTimes = {}

-- Função para checar se um ponto está dentro da base
local function isInBase(position)
    if not baseRegionPart then return false end
    local basePos = baseRegionPart.Position
    local baseSize = baseRegionPart.Size / 2
    return (position.X > basePos.X - baseSize.X and position.X < basePos.X + baseSize.X) and
           (position.Y > basePos.Y - baseSize.Y and position.Y < basePos.Y + baseSize.Y) and
           (position.Z > basePos.Z - baseSize.Z and position.Z < basePos.Z + baseSize.Z)
end

-- Atualiza o ESP com o tempo na base
local function updateBaseTimeESP()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local inBase = isInBase(hrp.Position)
            if not baseTimes[player] then baseTimes[player] = 0 end
            if inBase then
                baseTimes[player] = baseTimes[player] + 1 -- incrementa a cada segundo
            else
                baseTimes[player] = 0
            end
            
            -- Cria ou atualiza o BillboardGui para mostrar tempo
            local espGui = player.Character:FindFirstChild("BaseTimeESP")
            if not espGui then
                espGui = Instance.new("BillboardGui", player.Character)
                espGui.Name = "BaseTimeESP"
                espGui.Adornee = hrp
                espGui.Size = UDim2.new(0, 150, 0, 60) -- maior tamanho da caixa
                espGui.AlwaysOnTop = true

                local label = Instance.new("TextLabel", espGui)
                label.Size = UDim2.new(1, 0, 1, 0)
                label.BackgroundTransparency = 0.3
                label.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                label.TextColor3 = Color3.fromRGB(0, 255, 0)
                label.Font = Enum.Font.GothamBold
                label.TextScaled = false
                label.TextSize = 30 -- fonte maior
                label.Name = "TimeLabel"
                label.TextStrokeTransparency = 0
                label.TextStrokeColor3 = Color3.new(0,0,0)
                label.BorderSizePixel = 0
            end
            local label = espGui:FindFirstChild("TimeLabel")
            if label then
                label.Text = string.format("Base: %ds", baseTimes[player])
            end
        end
    end
end

-- Loop para atualizar a contagem a cada 1 segundo, só se ESP estiver ativo
task.spawn(function()
    while true do
        task.wait(1)
        if ESP_ENABLED then
            updateBaseTimeESP()
        else
            -- Se ESP desativado, limpa os baseTimes e remove Gui
            for _, player in pairs(Players:GetPlayers()) do
                if player.Character then
                    local espGui = player.Character:FindFirstChild("BaseTimeESP")
                    if espGui then espGui:Destroy() end
                end
            end
            baseTimes = {}
        end
    end
end)

-- NOCLIP TOTAL SEM VOLTAR
RunService.Stepped:Connect(function()
    if Noclip_ENABLED and localPlayer.Character then
        for _, part in ipairs(localPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
                part.Anchored = false
            end
        end
        local humanoid = localPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid:ChangeState(Enum.HumanoidStateType.FallingDown)
            humanoid.PlatformStand = false
        end
    end
end)

createButton("🧱 Noclip", 90, function()
    Noclip_ENABLED = not Noclip_ENABLED
end)

-- AUTO TELEPORT
function getClosestBrainrot()
    local minDist, closest = math.huge, nil
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Model") and v:FindFirstChild("HumanoidRootPart") and v.Name:lower():find("brainrot") then
            local dist = (v.HumanoidRootPart.Position - localPlayer.Character.HumanoidRootPart.Position).Magnitude
            if dist < minDist then
                minDist = dist
                closest = v
            end
        end
    end
    return closest
end

createButton("🚀 Auto TP", 140, function()
    Teleport_ENABLED = not Teleport_ENABLED
end)

task.spawn(function()
    while task.wait(0.5) do
        if Teleport_ENABLED and localPlayer.Character then
            local target = getClosestBrainrot()
            if target then
                local hrp = localPlayer.Character:FindFirstChild("HumanoidRootPart")
                if hrp then hrp.CFrame = target.HumanoidRootPart.CFrame + Vector3.new(0, 2, 0) end
            end
        end
    end
end)

-- AUTO STEAL
createButton("🏃‍♂️ Auto Steal", 190, function()
    Steal_ENABLED = not Steal_ENABLED
end)

task.spawn(function()
    while task.wait(1.5) do
        if Steal_ENABLED then
            for _, v in pairs(workspace:GetDescendants()) do
                if v:IsA("ProximityPrompt") and v.Enabled then
                    fireproximityprompt(v)
                end
            end
        end
    end
end)

-- PULO INFINITO SIMPLES (SEM PREVENÇÃO DE MORTE)
uis.InputBegan:Connect(function(input, gp)
    if InfiniteJump_ENABLED and input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.Space then
        local char = localPlayer.Character
        if char and char:FindFirstChild("Humanoid") then
            char.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
end)

local jumpButton = createButton("🏊 Pular", 240, function()
    local char = localPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

-- GODMODE COMPLETO
createButton("🚡 Godmode", 290, function()
    Godmode_ENABLED = not Godmode_ENABLED
    local char = localPlayer.Character
    if Godmode_ENABLED and char and char:FindFirstChild("Humanoid") then
        char.Humanoid.Name = "1"
        local newHumanoid = char.Humanoid:Clone()
        newHumanoid.Parent = char
        newHumanoid.Name = "Humanoid"
        newHumanoid.Health = 1000000
        newHumanoid.MaxHealth = 1000000
        task.wait(0.1)
        char:FindFirstChild("1"):Destroy()
        workspace.CurrentCamera.CameraSubject = newHumanoid
    end
end)

-- SPEED BOOST
createButton("⚡ Speed Boost", 340, function()
    SpeedBoost_ENABLED = not SpeedBoost_ENABLED
    local char = localPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid.WalkSpeed = SpeedBoost_ENABLED and 100 or 16
    end
end)

-- BOTÃO FLUTUANTE PARA MOSTRAR/ESCONDER MENU
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 40, 0, 40)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Text = "≡"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 20
toggleButton.ZIndex = 5
toggleButton.Parent = gui

local menuVisible = true

toggleButton.MouseButton1Click:Connect(function()
    menuVisible = not menuVisible
    frame.Visible = menuVisible
end)
